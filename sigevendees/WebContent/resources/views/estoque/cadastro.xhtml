<html lang="pt-br" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
      
<h:form id="formCadastro">
	<p:growl id="growl" showDetail="true" sticky="true" />
	
	<p:fieldset legend="Tipo:">
		<p:selectOneRadio id="tipoCadastro" value="#{gerenciaEstoqueBean.elemento.tipoElemento}" layout="grid" columns="2" unselectable="true">
	         <f:selectItems value="#{gerenciaEstoqueBean.categoriaElemento}" var="tipoElemento" itemLabel="#{tipoElemento.descricao}" itemValue="#{tipoElemento.toString()}"/>
	         <p:ajax update="formCadastro" listener="#{gerenciaEstoqueBean.inputsCadastro()}"/>
	    </p:selectOneRadio>
	</p:fieldset>
	<br/>
	<p:inputText id="descricao" placeholder="Descrição" value="#{gerenciaEstoqueBean.elemento.descricao}"/>
	
	<p:inputNumber id="estoqueMinimo" placeholder="Estoque mínimo" value="#{gerenciaEstoqueBean.estoqueMinimo}" rendered="#{!gerenciaEstoqueBean.tipoCadastro}"/>  

	<p:inputNumber id="valorVenda" placeholder="Valor de Venda R$" value="#{gerenciaEstoqueBean.elemento.valor}" rendered="#{gerenciaEstoqueBean.tipoCadastro}"/>
	
	<p:selectOneMenu id="tipoUnitario" value="#{gerenciaEstoqueBean.elemento.tipoUnitario}" rendered="#{!gerenciaEstoqueBean.tipoCadastro}">
		<f:selectItem itemDisabled="true" itemLabel="Tipo Unítario" />
		<f:selectItems value="#{gerenciaEstoqueBean.opcoes}" var="opcUnitario" itemLabel="#{opcUnitario.descricao}" itemValue="#{opcUnitario}"/>
	</p:selectOneMenu>
	
    <p:selectOneMenu id="listaDeComponentes" value="#{gerenciaEstoqueBean.componente.codigo}" rendered="#{gerenciaEstoqueBean.tipoCadastro}">
        <f:selectItem itemLabel="Ingrediente/Embalagem" noSelectionOption="true"/>
        <f:selectItems value="#{gerenciaEstoqueBean['listaDeComponente']}" var="itemComponente" itemLabel="#{itemComponente.descricao}" itemValue="#{itemComponente.codigo}"/>
		<p:ajax listener="#{gerenciaEstoqueBean.buscarComponente()}"/>
    </p:selectOneMenu>
    
	<p:inputText id="qtdComponente" value="#{gerenciaEstoqueBean.qtdUtilizado}" placeholder="Quantidade" rendered="#{gerenciaEstoqueBean.tipoCadastro}"/>
	
	<p:commandButton id="addListaComponente" action="#{gerenciaEstoqueBean.reinitComponenteDoProduto()}" value="Adicionar" update="tabViewMenuEstoque:formCadastro" rendered="#{gerenciaEstoqueBean.tipoCadastro}">
		<p:collector value="#{gerenciaEstoqueBean.componenteDoProduto}" addTo="#{gerenciaEstoqueBean['listaDeComponenteDoProduto']}" />
	</p:commandButton> 
		
		<p:dataTable id="tabelaComponentesDoProduto" value="#{gerenciaEstoqueBean['listaDeComponenteDoProduto']}" var="itemComponente" rendered="#{gerenciaEstoqueBean.tipoCadastro}" emptyMessage="Selecione os componentes do produto">
			<p:column headerText="Descrição">
				<h:outputText value="#{itemComponente.descricao}" />
			</p:column>
			<p:column headerText="Quantidade">
				<h:outputText value="#{itemComponente.valor}">
					<f:convertNumber pattern="###"/>
				</h:outputText>
				<h:outputText value="#{itemComponente.tipoUnitario.toLowerCase()}" />
			</p:column>
		</p:dataTable>
	
	<p:commandButton value="Salvar" id="salvarCadastro" action="#{gerenciaEstoqueBean.salvar}" update="@form, tabViewMenuEstoque:formAquisicao, tabViewMenuEstoque:formTabelaDeEstoque" style="margin-right:20px;" styleClass="ui-priority-primary"/>
	<p:commandButton value="Cancelar" id="cancelarAcaoCadastro" style="margin-right:20px;" styleClass="ui-priority-primary" />
	
</h:form>

</html>
